# Инструкция по настройке базы данных trizbd

## Порядок выполнения скриптов

### Вариант 1: Полная переустановка БД (с нуля)

Выполняй скрипты в следующем порядке:

1. **01_create_database.sql** - создание БД
2. **02_create_tables.sql** - создание таблиц с русскими CHECK ограничениями
3. **03_create_indexes.sql** - создание индексов
4. **04_seed_data.sql** - заполнение тестовыми данными (русские значения, даты 2025)
5. **05_roles_and_users.sql** - создание ролей и пользователей

### Вариант 2: Очистка существующей БД (оставить пользователей)

Если БД уже существует и нужно очистить данные:

1. **00_clear_database.sql** - очистка всех таблиц (кроме users)
2. **04_seed_data.sql** - заполнение тестовыми данными

### Вариант 3: Исправление существующих данных

Если нужно перевести уже существующие данные на русский:

1. **isprvlenie_dannih.sql** - исправление данных в существующей БД

## Как выполнить в pgAdmin4

1. Открой pgAdmin4
2. Подключись к серверу PostgreSQL
3. Выбери нужную БД (или создай новую)
4. Нажми правой кнопкой мыши на БД → Query Tool
5. Открой нужный SQL-файл (File → Open или Ctrl+O)
6. Нажми Execute (или F5)

## Важно!

- Файлы уже содержат русские значения для статусов
- Даты в тестовых данных установлены на 2025 год
- CHECK ограничения настроены под русский язык
- Пользователи и роли сохраняются при очистке БД

## Тестовые пользователи

После выполнения скриптов будут доступны:

- **admin_user** / Admin@123!Secure (роль: hotel_admin)
- **manager_user** / Manager@123!Secure (роль: hotel_manager)
- **guest_user** / Guest@123!Secure (роль: hotel_guest)

## Структура таблиц

- **room_types** - типы номеров
- **rooms** - номера отеля
- **guests** - гости
- **bookings** - бронирования
- **payments** - платежи
- **users** - пользователи системы
